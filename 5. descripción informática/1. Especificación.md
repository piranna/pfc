## Especificación

La estructura de NodeOS se ha hecho centrandose en los conceptos de simplicidad,
seguridad, facil comprensión del sistema, eliminación de cualquier elemento
superfluo que no sea necesario para la ejecución de aplicaciones de Node.js y,
en su defecto, su sustitución por alternativas escritas en Javascript, en
algunos casos teniendo que implementarlas desde cero al no haber ninguna hecha
previamente como ha sido el caso de
[century](../8. apéndices/2. colaboraciones con proyectos externos/node-century.html)
y [usrbinenv](../8. apéndices/1. módulos propios/usrbinenv.html).

### Diseño minimalista

El sistema esta diseñado para albergar únicamente los componentes indispensables
para poder ejecutar aplicaciones basadas en Node.js, y a partir de esta base
mínima cada usuario pueda instalar los módulos y aplicaciones que necesite,
creando un sistema operativo a su medida. De este modo, no solo se reducen su
tamaño y complejidad al eliminar componentes no necesarios, lo que permite que
este sistema básico pueda estar alojado en un disco RAM y aumentando el
rendimiento del mismo, sino que ademas permite aislar el sistema base de las
aplicaciones y documentos de los usuarios y que sea muy sencillo el mover la
instalación a otro equipo o aislar los problemas debidos a malas configuraciones.

### Basado en estandares

El uso de estandares y convenciones ya establecidas permite el uso de módulos
ya existentes y probados, pero igualmente el poder hacer uso de unas
especificaciones claramente definidas evita el cometer errores de diseño que ya
han sido resueltos con anterioridad y permitiendo el sustituir unos módulos por
otros compatibles, o crear estos de forma que sean facilmente utilizables en
otros sistemas. Este es el caso por ejemplo del uso del gestor de paquetes npm
propio de Node.js en lugar del propio de NodeOS [npkg](http://npkg.org) ya
deprecado, lo cual permite el uso de una utilidad actualmente en desarrollo y
con un mantenimiento continuado, ademas de que los usuarios ya estas
acostumbrados a usar, o el uso de un servidor HTTP/WebDAV para el acceso a los
archivos por parte de las aplicaciones gráficas en lugar de la creación de un
protocolo própio, permitiendo que pueda accederse a los mismos desde otros
sistemas o reutilizarse aplicaciones ya existentes sin apenas modificaciones.

### Sistema de archivos por usuario

Una caracteristica única de NodeOS que lo distingue de los demas sistemas
operativos es que cada usuario posee su própio sistema de archivos raiz
independiente y aislado del resto de usuarios, haciendo un sistema mas seguro al
no poder acceder a los archivos de los demas. Esto ademas permite que los
usuarios tengan una visión mas sencilla y flexible del sistema al ofrecer la
impresión de estar usando un sistema operativo mono-usuario (al estilo de
[MacOS Classic](https://es.wikipedia.org/wiki/Historia_de_Mac_OS) o
[Windows 9x](https://es.wikipedia.org/wiki/Windows_9x)) donde tienen capacidad
de modificar y configurarlo todo, sin riesgo de afectar al sistema o a los demas
usuarios ya que todos sus cambios quedan recluidos en su própio directorio de
usuario, haciendo que el sistema sea mas estable.

Esta impresión esta reforzada por el hecho de que cada usuario tiene su própio
sistema de archivos temporal (*tmpfs*) y que estos pueden acceder directamente
al sistema de archivos *procfs* y a los dispositivos del sistema (*devtmpfs*) de
forma similar a como podria hacer un usuario administrador en un sistema
operativo tradicional. No obstante, por seguridad y estabilidad dicho acceso
esta limitado de forma que en el sistema de archivos *procfs* solo se pueda
acceder a la información de los procesos del propio usuario, y de forma similar
solo se puede acceder a los dispositivos del sistema que no esten siendo usados
por otro usuario en ese momento mediante el uso del sistema de archivos
[ExclFS](../8. apéndices/1. módulos propios/ExclFS.html).

### Usuarios sin privilegios

En NodeOS no hay usuarios con permisos de administrador, siendo todos usuarios
normales. El superusuario *root* solo es necesario durante el proceso de
arranque para inicializar el sistema, montar la partición de los usuarios y
ejecutar servicios disponibles globalmente como
[logon](../8. apéndices/1. módulos propios/logon.html), no habiendo en el
sistema ningun otro proceso ejecutandose con permisos de administrador para
disminuir las posibilidades de que se pueda producir un escalado de privilegios.

Éste sistema de seguridad puede plantear algunos problemas de administración
cuando se trata de recursos comunes a todos los usuarios o la ejecución de
acciones que afecten a todo el sistema, como son los puertos TCP o la necesidad
de hacer un apagado de la máquina. En el caso de los recursos comunes una de las
ideas barajadas es que estos puedan ser accesibles por cualquier usuario siempre
que no esten siendo usados del mismo modo a como se hace con los dispositivos
del sistema mediante el uso de *ExclFS*.

En el caso del apagado de la máquina se plantea un enfoque mas radical al no
implementarse dicho mecanismo haciendo que el comportamiento esperado sea que el
[sistema puede apagarse en cualquier momento](https://github.com/NodeOS/NodeOS/issues/71).
Esto obliga a los desarrolladores a que sean conscientes de este hecho de forma
que a la hora de diseñar sus programas tomen las medidas adecuadas para
garantizar de forma conveniente la integridad de sus datos (por ejemplo
diseñandolas sin estado o para que usen transacciones), lo cual ademas es acorde
a la filosofia original del sistema UNIX (del que derivan Linux y OSX) ya que
[no se hizo para ser apagado](http://www.tldp.org/LDP/intro-linux/html/sect_04_02.html#sect_04_02_06).
Ademas, de forma colateral esto repercute haciendo que dichas aplicaciones sean
mas resilientes incluso cuando se ejecuten sobre una instancia normal de Node.js
en un sistema operativo estandar, ya que dicho diseño es independiente del
sistema donde vaya a ejecutarse.

### Simplicidad de uso

El uso de un lenguaje de alto nivel para desarrollar las aplicaciones permite
una mayor comprensión del sistema al no tener que preocuparse de aspectos de
bajo nivel como son las estructuras de datos o la aritmetica de punteros,
permitiendo a los desarrolladores centrarse en la tarea a realizar y aumentando
la confiabilidad del sistema. Al ser un lenguaje de script y estar disponible el
código fuente de las aplicaciones y librerias en todo momento, permite que sea
fácil de estudiar el comportamiento del sistema tanto por su aprendizaje como
para la realización de auditorias de seguridad, simplemente leyendo el contenido
del archivo a inspeccionar en vez de tener que localizar primero su código
fuente y compilarlo. Además, debido a que cada usuario tiene un sistema de
archivos aislado del resto en el que tiene control absoluto sobre los mismos,
tambien puede realizar modificaciones en el propio archivo *in situ* sin afectar
al resto de usuarios o al funcionamiento del sistema.

Por último, se aboga por ofrecer una visión simplificada del sistema operativo
que facilite su uso y comprensión tanto por usuarios ocasionales o en un ambito
academico como por administradores de sistemas y desarrolladores expertos. Para
ello se han eliminado algunos directorios que se mantienen por compatibilidad o
para su uso en casos concretos en otros sistemas como `/opt`, `/sbin`, `/usr` o
`/usr/local` y que no son necesarios para ejecutar aplicaciones de Node.js,
presentando una jerarquia de archivos mas limpia y plana. Esta visión
simplificada del sistema de archivos tambien es propiciada por el uso del
sistema de archivos propio por cada usuario al no poder visualizar archivos de
otros usuarios.

### Interfaz gráfica basada en HTML5

NodeOS esta principalmente orientado a servidores en la nube y sistemas
embebidos, pero suelen aparecer periodicamente dudas y sugerencias al respecto
de una posible interfaz gráfica, por lo que aunque no este incluida por defecto
en el sistema básico, si que se ha planteado darle un apoyo oficial a las
distintas iniciativas.

Para los sistemas embebidos y dedicados puede ser suficiente con el empleo del
dispositivo de framebuffer de Linux mediante el úso del módulo
[node-canvas](../8. apéndices/2. colaboraciones con proyectos externos/node-canvas.html),
pero para la creación de interfaces mas complejas como es la creación de un
entorno de escritorio, la solución óbvia es el uso de HTML5 y tecnologias web
como son [WebDAV](http://www.webdav.org) para el acceso a los archivos o
[WebSockets](https://tools.ietf.org/html/rfc6455) para las shell interactivas y
la actualización de datos en la interfaz gráfica en tiempo real, tal y como
proponen algunos frameworks web como [Meteor](https://www.meteor.com). En este
sentido, se ha propuesto el que se aisle completamente la interfaz gráfica de
las APIs ofrecidas por Node.js usandose un servidor web *ad-hoc* en caso de
tener que hacer uso de estas, a diferencia de otras alternativas similares como
[nw.js](http://nwjs.io) o [electron](http://electron.atom.io) (usado internamente
por el editor [Atom](https://atom.io)), o el diseño de una API própia. De esta forma, no solo
permite que se pueda ejecutar dicha interfaz gráfica en cualquier navegador web
estandar permitiendo que pueda ser usada tanto en local como en remoto de forma
transparente, sino que además reduce el consumo de recursos en el servidor al
promover que se realicen todas las operaciones que sean posibles en el lado del
cliente.
